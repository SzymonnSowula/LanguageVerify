<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weryfikacja Tłumaczenia</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <h1>Weryfikacja Tłumaczenia</h1>
    <p>Najlepiej działa w językach: Polski, Angielski, Niemiecki, Czeski, Francuski, Hiszpański, Włoski, Portugalski, Rosyjski, Ukraiński</p>
    
    <form id="translation-form">
        <label for="source-text">Tekst w języku źródłowym:</label>
        <textarea id="source-text" rows="4" cols="50" required></textarea><br /><br />

        <label for="translated-text">Tłumaczenie:</label>
        <textarea id="translated-text" rows="4" cols="50" required></textarea><br /><br />

        <label for="source-language">Język źródłowy:</label>
        <input type="text" id="source-language-search" class="search-input" placeholder="Wyszukaj język..." />
        <select id="source-language" required>
            <option value="pl">Polski</option>
            <option value="en">Angielski</option>
            <option value="de">Niemiecki</option>
            <option value="cs">Czeski</option>
            <option value="fr">Francuski</option>
            <option value="es">Hiszpański</option>
            <option value="it">Włoski</option>
            <option value="pt">Portugalski</option>
            <option value="ru">Rosyjski</option>
            <option value="uk">Ukraiński</option>
            <option value="hr">Chorwacki</option>
            <option value="nl">Holenderski</option>
            <option value="sv">Szwedzki</option>
            <option value="tr">Turecki</option>
            <option value="hi">Hindi</option>
            <option value="el">Grecki</option>
            <option value="hu">Węgierski</option>
            <option value="id">Indonezyjski</option>
            <option value="lt">Litewski</option>
            <option value="lv">Łotewski</option>
            <option value="no">Norweski</option>
            <option value="ro">Rumuński</option>
            <option value="sk">Słowacki</option>
            <option value="sl">Słoweński</option>
            <option value="ja">Japoński</option>
            <option value="ko">Koreański</option>
            <option value="zh">Chiński</option>
            <option value="ar">Arabski</option>
            <option value="fa">Perski</option>
            <option value="he">Hebrajski</option>
            <option value="ur">Urdu</option>
            <option value="vi">Wietnamski</option>
            <option value="th">Tajski</option>
            <option value="ms">Malajski</option>
         
        </select><br /><br />

        <label for="target-language">Język docelowy:</label>
        <input type="text" id="target-language-search" class="search-input" placeholder="Wyszukaj język..." />
        <select id="target-language" required>
            <option value="pl">Polski</option>
            <option value="en">Angielski</option>
            <option value="de">Niemiecki</option>
            <option value="cs">Czeski</option>
            <option value="fr">Francuski</option>
            <option value="es">Hiszpański</option>
            <option value="it">Włoski</option>
            <option value="pt">Portugalski</option>
            <option value="ru">Rosyjski</option>
            <option value="uk">Ukraiński</option>
            <option value="hr">Chorwacki</option>
            <option value="nl">Holenderski</option>
            <option value="sv">Szwedzki</option>
            <option value="tr">Turecki</option>
            <option value="hi">Hindi</option>
            <option value="el">Grecki</option>
            <option value="hu">Węgierski</option>
            <option value="id">Indonezyjski</option>
            <option value="lt">Litewski</option>
            <option value="lv">Łotewski</option>
            <option value="no">Norweski</option>
            <option value="ro">Rumuński</option>
            <option value="sk">Słowacki</option>
            <option value="sl">Słoweński</option>
            <option value="ja">Japoński</option>
            <option value="ko">Koreański</option>
            <option value="zh">Chiński</option>
            <option value="ar">Arabski</option>
            <option value="fa">Perski</option>
            <option value="he">Hebrajski</option>
            <option value="ur">Urdu</option>
            <option value="vi">Wietnamski</option>
            <option value="th">Tajski</option>
            <option value="ms">Malajski</option>
         
        </select><br /><br />

        <button type="button" id="switch-languages">Switch Languages</button><br /><br />

        <button type="submit">Weryfikuj</button>
    </form>

    <div class="result">
        <h2>Wyniki Weryfikacji</h2>
        <p id="results"></p>
    </div>

    <script>
        // Funkcja wyszukiwania języka
        document.getElementById('source-language-search').addEventListener('input', filterLanguages);
        document.getElementById('target-language-search').addEventListener('input', filterLanguages);

        function filterLanguages() {
            const sourceSearch = document.getElementById('source-language-search').value.toLowerCase();
            const targetSearch = document.getElementById('target-language-search').value.toLowerCase();
            
            const sourceOptions = document.getElementById('source-language').options;
            for (let i = 0; i < sourceOptions.length; i++) {
                let option = sourceOptions[i];
                option.style.display = option.text.toLowerCase().includes(sourceSearch) ? 'block' : 'none';
            }

            const targetOptions = document.getElementById('target-language').options;
            for (let i = 0; i < targetOptions.length; i++) {
                let option = targetOptions[i];
                option.style.display = option.text.toLowerCase().includes(targetSearch) ? 'block' : 'none';
            }
        }

        // Funkcja do przełączania języków
        document.getElementById('switch-languages').addEventListener('click', function() {
            const sourceLanguage = document.getElementById('source-language').value;
            const targetLanguage = document.getElementById('target-language').value;

            // Zamiana wartości
            document.getElementById('source-language').value = targetLanguage;
            document.getElementById('target-language').value = sourceLanguage;
        });

        // Obsługa formularza
        document.getElementById('translation-form').addEventListener('submit', async function(event) {
            event.preventDefault();

            const sourceText = document.getElementById('source-text').value;
            const translatedText = document.getElementById('translated-text').value;
            const sourceLanguage = document.getElementById('source-language').value;
            const targetLanguage = document.getElementById('target-language').value;

            const response = await fetch('http://127.0.0.1:5000/verify-translation', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    source_text: sourceText,
                    translated_text: translatedText,
                    source_language: sourceLanguage,
                    target_language: targetLanguage
                }),
            });

            const data = await response.json();

            if (response.ok) {
                document.getElementById('results').textContent = data.response || 'Odpowiedź nie została dostarczona.';
            } else {
                document.getElementById('results').textContent = 'Błąd: ' + data.error;
            }
        });
    </script>
</body>
</html>
